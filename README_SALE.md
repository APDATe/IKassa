# IKassa
Внешняя компонента работы с кассовыми аппаратами 3в1

# Методы работы в 1С Предприятие 7.7

### Метод  Продажа()

Данный метод выполняет продажу на кассе и принимает следующие параметры

Параметр | Описание
---|---
ИмяКассира | Имя кассира (Хотя бы 1 символ. Все что больше 16 символов, отбрасывается).
СуммаНаличными | Сумма наличными (тип Число два знача после запятой (разделитель любой!) - (Точка либо запятая не Важно!).
СуммаБезналичными | Сумма безналичными (тип Число два знача после запятой (разделитель любой!) - (Точка либо запятая не Важно!).
СуммаДругимиСпособами | Сумма другими способами. (тип Число два знака после запятой (разделитель любой!) - (Точка либо запятая не Важно!).
ПечататьЧек | Необязательное поле. Стандартное значение = 1. Флаг определяющий будет ли печататься чек.. Тип - Число количество знаков -1 (1 Печатаем / 0 Не печатать)
Адрес | Необязательное поле. Кастомный текст для поля адреса на чеке.
НомерТелефона | Кастомный текст для поля номера телефона на чеке.
НазваниеТорговойТочки | Кастомный текст для поля название тороговой точки на чеке..


### Метод  Продажа().ДобавитьТовар()

Данный метод добавляет в продажу список товаров и принимает следующие параметры

Параметр | Описание
---|---
Наименование | Наименование товара 
ТипКода |  Необязательное поле. Стандартное значение = 0. (Может принимать следующие типы - 0 - plain-код (не имеет классификации), 1 - GTIN/EAN, 3 - Услуга, 4 - Аванс 
Артикул |  Необязательное поле. Стандартное значение = "0". Непосредственно сам код товара
Цена |  Цена товарной позиции. Больше нуля. Максимальное значение 99999999999.99.
Количество |  Количество. Больше нуля. Максимальное значение 9999.999.
СкидкаПроцентная |  Необязательное поле. Стандартное значение = 0. (Если 1 - добавляет скидку в процентах., Если 0 - добавляет ценовую скидку.)
Скидка |  Необязательное поле. Если значение отрицательное, то применяется надбавка. Процентная Максимальное значение 100. 2 Знака после запятой. Ценовая Максимальное значение 99999999999.99.
СтавкаНДС |  Необязательное поле. ставка НДС для товарной позиции (Тип число 20 / 10 / 1 БезНДС / 0

### Метод  Продажа().Закрыть("http://192.168.111.212:37015/v1", "75928")
Данный метод закрывает чек и принимает параметры непосредственно в методе 

Параметр | Описание
---|---
URL:PORT | URL - адрес кассовог оаппарта с портом (должен всегда заканчиваться /v1 
Пин-код |  пароль кассира (указан в пасперте токена)

### Представление синтаксиса 1С Предприятие 7.7

```1C
//Подключаем компоненту
МояКасса = СоздатьОбъект("AddIn.V7AlexEngineKassa");
//Создаем новый экземпляр класса Продажа();	
Документ =  МояКасса.Продажа();
//Заполняем парамтеры класса Продажа();
Документ.ИмяКассира            = "Иванова";
Документ.СуммаНаличными        = 59.66;
Документ.СуммаБезналичными     = 10;
Документ.СуммаДругимиСпособами = 0;
Документ.ПечататьЧек           = 1;
Документ.Адрес                 = "Гомель ул. Артиллерийская д. 6";
Документ.НомерТелефона         = "+375 25 600 87 01";
Документ.НазваниеТорговойТочки = "Библа для Ай Касса";
Документ.рекламныйтекст        = "3 Царства по цене одного!";

# Начало итерации
//Создаем новый экземпляр класса ДобавитьТовар() владельцем которого является класс Продажа();
СтрТовара = Документ.ДобавитьТовар();
//Заполняем парамтеры класса ДобавитьТовар();
СтрТовара.Наименование     = "Товар1";
СтрТовара.ТипКода          = 0;
СтрТовара.Артикул          = "Товар1 - 1";
СтрТовара.Цена             = 12.50;
СтрТовара.Количество       = 1;
СтрТовара.СкидкаПроцентная = 0;
СтрТовара.Скидка           = 0;
СтрТовара.СтавкаНДС        = 10;
# Конец итерации

//Выполняем метод Закрыть(string "URL", string "PinKod") класса Продажа();
ответ = Документ.Закрыть("http://192.168.111.212:37015/v1", "75928");

```

### Метод Закрыть() Любого класса возвращает следующие параметры

Параметр | Описание
---|---
КодОтвета | Коды ответа тип-число далее здесь приложу ссылку на описание кодов ответа 
Детали |  Описание кода ответа 

