# IKassa
Внешняя компонента работы с кассовыми аппаратами 3в1

# Методы работы в 1С Предприятие 7.7

### Метод  Возврат()

Данный метод выполняет Возврат товара на кассе и принимает следующие параметры

Параметр | Описание
---|---
ИмяКассира | Имя кассира (Хотя бы 1 символ. Все что больше 16 символов, отбрасывается).
Наименование | Наименование товара 
ТипКода |  Стандартное значение = 0. (Может принимать следующие типы - 0 - plain-код (не имеет классификации), 1 - GTIN/EAN, 3 - Услуга, 4 - Аванс 
Артикул |  ОБЯЗАТЕЛЬНОЕ-поле. Стандартное значение = "0". Непосредственно сам код товара
Цена |  Цена товарной позиции. Больше нуля. Максимальное значение 99999999999.99.
Количество |  Количество. Больше нуля. Максимальное значение 9999.999.
СуммаНаличными | Сумма наличными (тип Число два знача после запятой (разделитель любой!) - (Точка либо запятая не Важно!).
СуммаБезналичными | Сумма безналичными (тип Число два знача после запятой (разделитель любой!) - (Точка либо запятая не Важно!).
СуммаДругимиСпособами | Сумма другими способами. (тип Число два знака после запятой (разделитель любой!) - (Точка либо запятая не Важно!).
СуммаВозвратаОплати | Сумма сервисом оплати
ПечататьЧек | ТИП ЧИСЛО  1 печатать 0 не печатать

### Метод  Возврат().Закрыть("http://192.168.111.212:37015/v1", "75928")
Данный метод закрывает чек и принимает параметры непосредственно в методе 

Параметр | Описание
---|---
URL:PORT | URL - адрес кассовог оаппарта с портом (должен всегда заканчиваться /v1 
Пин-код |  пароль кассира (указан в пасперте токена)

### Представление синтаксиса 1С Предприятие 7.7

```1C
//Подключаем компоненту
МояКасса = СоздатьОбъект("AddIn.V7AlexEngineKassa");
//Создаем новый экземпляр класса Возврат();	
Документ =  МояКасса.Возврат();
//Заполняем парамтеры класса Возврат();
Документ.ИмяКассира            = "Иванова";
Документ.СуммаНаличными        = 59.66;
Документ.СуммаБезналичными     = 10;
Документ.СуммаДругимиСпособами = 0;
Документ.СуммаВозвратаОплати   = 0;
Документ.ПечататьЧек           = 1;
СтрТовара.Наименование     = "Товар1";
СтрТовара.ТипКода          = 0;
СтрТовара.Артикул          = "Товар1 - 1";
СтрТовара.Цена             = 12.50;
СтрТовара.Количество       = 1;

//Выполняем метод Закрыть(string "URL", string "PinKod") класса Возврат();
ответ = Документ.Закрыть("http://192.168.111.212:37015/v1", "75928");

```

### Метод Закрыть() Любого класса возвращает следующие параметры

Параметр | Описание
---|---
КодОтвета | Коды ответа тип-число * [Описание кодов ошибок](./resultCode.md)
Детали |  Описание кода ответа 

Перейти к следующему методу: 
* [Описание метода СостояниеКассы()](./README_OTHER_INFO.md)
* [Описание метода ОткрытьСмену()](./README_OPEN_SHIFT.md)
* [Описание метода Внесение()](./README_DEPOSIT.md)
* [Описание метода Продажа()](./README_SALE.md)
* [Описание метода АннулированиеЧека()](./README_ROLLBACK_CHECK.md)
* [Описание метода ПечатьХОтчета()](./README_X_REPORT.md)
* [Описание метода ПечатьДокумента()](./README_PRINT.md)
* [Описание метода Изъятие()](./README_WITHDRAW.md)
* [Описание метода ЗакрытиеСмены()](./README_CLOSE_SHIFT.md)
* [Описание метода ПечатьПоследнегоОтчетаЗакрытияСмены()](./README_PRINT_Z_REPORT.md)
